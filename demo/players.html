<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal64 API Demo - Players</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body class="player-page">
    <header class="header">
        <div class="container">
            <h1>Players API</h1>
            <p>Search and explore chess player data from the DWZ rating system</p>
            <p><a href="index.html" style="color: var(--light-gray); text-decoration: underline;">‚Üê Back to Dashboard</a></p>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="tabs">
                <nav class="tab-nav">
                    <button class="tab-nav-item" data-tab="search-players">Search Players</button>
                    <button class="tab-nav-item" data-tab="player-lookup">Player Lookup</button>
                    <button class="tab-nav-item" data-tab="rating-history">Rating History</button>
                    <button class="tab-nav-item" data-tab="club-players">Club Players</button>
                </nav>

                <!-- Search Players Tab -->
                <div id="search-players" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Search Players</h2>
                        </div>
                        <p>Search for players by name with advanced filtering and sorting options.</p>
                        
                        <form id="player-search-form" class="search-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="search-query">Search Query</label>
                                    <input type="text" id="search-query" name="query" class="form-input" 
                                           placeholder="Enter player name..." required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="search-limit">Results per page</label>
                                    <select id="search-limit" name="limit" class="form-select">
                                        <option value="10">10</option>
                                        <option value="20" selected>20</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">&nbsp;</label>
                                    <button type="submit" class="btn btn-primary">Search Players</button>
                                </div>
                            </div>

                            <button type="button" class="advanced-toggle">Show Advanced Options</button>
                            
                            <div class="advanced-search">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="search-offset">Offset (pagination)</label>
                                        <input type="number" id="search-offset" name="offset" class="form-input" 
                                               value="0" min="0">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="search-sort-by">Sort by</label>
                                        <select id="search-sort-by" name="sort_by" class="form-select">
                                            <option value="name" selected>Name</option>
                                            <option value="current_dwz">DWZ Rating</option>
                                            <option value="birth_year">Birth Year</option>
                                            <option value="club_name">Club Name</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="search-sort-order">Sort order</label>
                                        <select id="search-sort-order" name="sort_order" class="form-select">
                                            <option value="asc" selected>Ascending</option>
                                            <option value="desc">Descending</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="search-format">Response format</label>
                                        <select id="search-format" name="format" class="form-select">
                                            <option value="json" selected>JSON</option>
                                            <option value="csv">CSV</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div id="player-search-results" class="results">
                            <!-- Search results will be displayed here -->
                        </div>
                    </div>
                </div>

                <!-- Player Lookup Tab -->
                <div id="player-lookup" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Individual Player Lookup</h2>
                        </div>
                        <p>Look up detailed information for a specific player using their Player ID.</p>
                        
                        <form id="player-lookup-form" class="search-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="lookup-player-id">Player ID *</label>
                                    <input type="text" id="lookup-player-id" name="player_id" class="form-input" 
                                           placeholder="e.g., UNKNOWN-10799083 or C0101-1014" required>
                                    <div id="lookup-player-id-error" class="form-error">Please enter a valid player ID (format: CLUBID-PERSONID)</div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="lookup-format">Response format</label>
                                    <select id="lookup-format" name="format" class="form-select">
                                        <option value="json" selected>JSON</option>
                                        <option value="csv">CSV</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">&nbsp;</label>
                                    <button type="submit" class="btn btn-primary">Get Player Details</button>
                                </div>
                            </div>
                        </form>

                        <div class="alert alert-info">
                            <h4>Player ID Format</h4>
                            <p>Player IDs follow the format <code>CLUBID-PERSONID</code> where CLUBID is the club identifier and PERSONID is a number. Examples: <code>UNKNOWN-10799083</code>, <code>C0101-1014</code>, <code>D300H-1234</code></p>
                        </div>

                        <div id="player-lookup-results" class="results">
                            <!-- Player details will be displayed here -->
                        </div>
                    </div>
                </div>

                <!-- Rating History Tab -->
                <div id="rating-history" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Player Rating History</h2>
                        </div>
                        <p>View the complete DWZ rating history for a specific player.</p>
                        
                        <form id="rating-history-form" class="search-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="history-player-id">Player ID *</label>
                                    <input type="text" id="history-player-id" name="player_id" class="form-input" 
                                           placeholder="e.g., UNKNOWN-10799083 or C0101-1014" required>
                                    <div id="history-player-id-error" class="form-error">Please enter a valid player ID (format: CLUBID-PERSONID)</div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="history-format">Response format</label>
                                    <select id="history-format" name="format" class="form-select">
                                        <option value="json" selected>JSON</option>
                                        <option value="csv">CSV</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">&nbsp;</label>
                                    <button type="submit" class="btn btn-primary">Get Rating History</button>
                                </div>
                            </div>
                        </form>

                        <div id="rating-history-results" class="results">
                            <!-- Rating history will be displayed here -->
                        </div>
                    </div>
                </div>

                <!-- Club Players Tab -->
                <div id="club-players" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Club Players</h2>
                        </div>
                        <p>Get all players belonging to a specific chess club.</p>
                        
                        <form id="club-players-form" class="search-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="club-id">Club ID *</label>
                                    <input type="text" id="club-id" name="club_id" class="form-input" 
                                           placeholder="e.g., C0101" required>
                                    <div id="club-id-error" class="form-error">Please enter a valid club ID (format: C####)</div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="club-players-limit">Results per page</label>
                                    <select id="club-players-limit" name="limit" class="form-select">
                                        <option value="10">10</option>
                                        <option value="20" selected>20</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">&nbsp;</label>
                                    <button type="submit" class="btn btn-primary">Get Club Players</button>
                                </div>
                            </div>

                            <button type="button" class="advanced-toggle">Show Advanced Options</button>
                            
                            <div class="advanced-search">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="club-players-query">Player name search</label>
                                        <input type="text" id="club-players-query" name="query" class="form-input" 
                                               placeholder="Filter by player name...">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="club-players-offset">Offset</label>
                                        <input type="number" id="club-players-offset" name="offset" class="form-input" 
                                               value="0" min="0">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="club-players-sort-by">Sort by</label>
                                        <select id="club-players-sort-by" name="sort_by" class="form-select">
                                            <option value="name" selected>Name</option>
                                            <option value="current_dwz">DWZ Rating</option>
                                            <option value="birth_year">Birth Year</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="club-players-sort-order">Sort order</label>
                                        <select id="club-players-sort-order" name="sort_order" class="form-select">
                                            <option value="asc" selected>Ascending</option>
                                            <option value="desc">Descending</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="club-players-format">Response format</label>
                                        <select id="club-players-format" name="format" class="form-select">
                                            <option value="json" selected>JSON</option>
                                            <option value="csv">CSV</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div class="alert alert-info">
                            <h4>Club ID Format</h4>
                            <p>Club IDs follow the format <code>C####</code> where # represents digits. For example: <code>C0101</code></p>
                        </div>

                        <div id="club-players-results" class="results">
                            <!-- Club players will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Player Detail Modal -->
    <div id="player-detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Player Details</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="player-detail-content"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close">Close</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Portal64 API Demo. Player management interface.</p>
        </div>
    </footer>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/players.js"></script>
</body>
</html>